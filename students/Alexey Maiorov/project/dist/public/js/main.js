!function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=2)}([function(t,n,e){},function(t,n,e){},function(t,n,e){"use strict";e.r(n);var r={el:"#app",data:{products:[],cart:[],img:"https://placehold.it/200x150",cartImg:"https://placehold.it/100x80",cartInvisible:!0},methods:{getJSON:function(t){return fetch(t).then((function(t){return t.json()}))},postJSON:function(t,n){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.json()}))},putJSON:function(t,n){return fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({op:n})}).then((function(t){return t.json()}))},deleteJSON:function(t){return fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()}))}},components:{products:{template:' <div class="products">\n                    <productItem v-for="prodObj in finds" :img="image" :item="prodObj" :key="prodObj.id"></productItem>\n                </div>',data:function(){return{image:"https://placehold.it/200x150",products:[],finds:[]}},methods:{search:function(t){var n=new RegExp(t,"i");this.finds=this.products.filter((function(t){return n.test(t.title)}))}},mounted:function(){var t=this;this.$parent.getJSON("/api/catalog").then((function(n){return t.products=n})).then((function(n){return t.finds=n}))},components:{productsItem:productsItem}},cart:{template:' <div class="wrapper">\n                <button class="btn-cart" type="button" v-on:click = "showCart">Корзина</button>\n                    <div class="cart-block" v-if = "!cartInvisible">\n                        <cartItem v-for = "prodObj of cart" :img="cartImg" :item="prodObj" :key="prodObj.id"></cartItem>\n                    </div>\n                </div>',data:function(){return{cart:[],cartImg:"https://placehold.it/100x80",addApproveUrl:"https://raw.githubusercontent.com/alexmaiorov/for_json/master/addToBasket.json",delApproveUrl:"https://raw.githubusercontent.com/alexmaiorov/for_json/master/deleteFromBasket.json",cartInvisible:!0}},methods:{showCart:function(){this.cartInvisible=!this.cartInvisible},addProduct:function(t){var n=this,e=this.cart.find((function(n){return n.id===t.id}));if(e)this.$parent.putJSON("/api/cart/".concat(e.id),1).then((function(t){t.result&&e.quantity++}));else{var r=Object.assign({},t,{quantity:1});this.$parent.postJSON("/api/cart",r).then((function(t){t.result&&n.cart.push(r)}))}},removeProduct:function(t){var n=this;t.quantity>1?this.$parent.putJSON("/api/cart/".concat(t.id),-1).then((function(n){n.result&&t.quantity--})):this.$parent.deleteJSON("/api/cart/".concat(t.id)).then((function(e){e.result&&(console.log(t),n.cart.splice(n.cart.indexOf(t),1))}))}},mounted:function(){var t=this;this.$parent.getJSON("/api/cart").then((function(n){return t.cart=n.contents}))},component:{cartItem:{props:["img","item"],template:'<div class="cart-item">\n                    <div class="product-bio">\n                        <img :src="img" alt="Some image">\n                        <div class="product-desc">\n                            <p class="product-title">{{item.title}}</p>\n                            <p class="product-quantity">Quantity: {{item.quantity}}</p>\n                            <p class="product-single-price">{{item.price}} each</p>\n                        </div>\n                    </div>\n                    <div class="right-block">\n                        <p class="product-price">{{item.quantity * item.price}}</p>\n                        <button class="del-btn" v-on:click="$parent.removeProduct(item)">&times;</button>\n                    </div>\n                </div>'}}}}};e(0),e(1),new Vue(r)}]);