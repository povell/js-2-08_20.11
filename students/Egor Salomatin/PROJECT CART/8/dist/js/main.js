!function(t){var n={};function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(n){return t[n]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=2)}([function(t,n,e){},function(t,n,e){},function(t,n,e){"use strict";e.r(n);var i={el:"#app",data:{catalogUrl:"/catalogData.json",products:[],cartItems:[],imgCart:"https://placehold.it/100x80",isCartVisible:!0},methods:{showCart:function(){this.isCartVisible=!this.isCartVisible},getJSON:function(t){return fetch(t).then((function(t){return t.json()}))},postJSON:function(t,n){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.status}))},putJSON:function(t,n){return fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.status}))},deleteJSON:function(t,n){return fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.status}))}},components:{catalog:{data:function(){return{items:[],imgCatalog:"https://placehold.it/200x150"}},mounted:function(){var t=this;this.$parent.getJSON("/api/catalog").then((function(n){return t.items=n}))},template:'\n    <div class="products">\n        <catalog-item v-for="product of items" :img="imgCatalog" :el="product" :key="product.id_product"/>\n    </div>\n    ',components:{"catalog-item":{props:["img","el"],template:'\n    <div class="product-item">\n        <img :src="img" alt="Some img">\n        <div class="desc">\n            <h3>{{ el.product_name }}</h3>\n            <p>{{ el.price }} $</p>\n            <button class="buy-btn" @click="$root.$refs.cartcomp.addProduct(el)">Купить</button>\n        </div>\n    </div>\n    '}}},cart:{data:function(){return{items:[],imgCart:"https://placehold.it/100x80"}},methods:{addProduct:function(t){var n=this,e=this.items.find((function(n){return n.id_product===t.id_product}));if(e){var i=Object.assign({},{product:e,mod:"+"});this.$parent.putJSON("/api/cart",i).then((function(t){200===t&&e.quantity++}))}else{var r=Object.assign({},t,{quantity:1});this.$parent.postJSON("/api/cart",r).then((function(t){200===t&&n.items.push(r)}))}},delProduct:function(t){var n=this;if(t.quantity>1){var e=Object.assign({},{product:t,mod:"-"});this.$parent.putJSON("/api/cart",e).then((function(e){console.log(n.items),200===e&&t.quantity--}))}else this.$parent.deleteJSON("/api/cart",t).then((function(e){200===e&&n.items.splice(n.items.indexOf(t),1)}))}},mounted:function(){var t=this;this.$parent.getJSON("/api/cart").then((function(n){return t.items=n.contents}))},template:'\n    <div class="cart-block">\n        <cart-item v-for="product of items" :img="imgCart" :el="product" :key="product.id_product"/>\n    </div>\n    ',components:{"cart-item":{props:["img","el"],template:'\n    <div class="cart-item">\n        <div class="product-bio">\n            <img :src="img" alt="Some image">\n            <div class="product-desc">\n                <p class="product-title">{{ el.product_name }}</p>\n                <p class="product-quantity">Quantity: {{ el.quantity }}</p>\n                <p class="product-single-price">$ {{ el.price }} each</p>\n            </div>\n        </div>\n        <div class="right-block">\n            <p class="product-price">{{ el.quantity * el.price }}</p>\n            <button class="del-btn" @click="$parent.delProduct(el)">&times;</button>\n        </div>\n    </div>\n    '}}}}};e(0),e(1),new Vue(i)}]);